webpackJsonp([34],{LuiR:function(t,a){},UI0I:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("mvHQ"),s=e.n(i),n=(e("jgNZ"),e("syWm")),o=e.n(n),r=(e("dKGA"),e("kSul")),c=e.n(r),l=(e("uTM9"),e("Jq84")),u=e.n(l),p=(e("3evy"),e("Irlo")),v=e.n(p),h=(e("CCOf"),e("rrcz")),d=e.n(h),C=(e("jydU"),e("WQwN")),A=e.n(C),S=(e("9ULi"),e("lQdh")),g=e.n(S),m=(e("J7DX"),e("Iz4n")),f=e.n(m),R=(e("RB7Z"),e("3TLy")),w=e.n(R),L=(e("GKy3"),e("4vvA")),x=e.n(L),I=e("Cz8s"),T=e("7+uW"),M=e("VsUZ");T.default.use(o.a).use(c.a).use(u.a).use(v.a).use(d.a).use(A.a).use(g.a).use(f.a).use(w.a).use(x.a);var E={data:function(){return{questionText:"人机定位",isLoading:!0,active:0,searchVal:"",isSearchShow:!1,activeClassType:!1,value1:0,Section:"",value2:0,Worksite:"",ajax:M,showList:!0,map:null,carList:[],option1:[{text:"全部标段",value:0},{text:"CYCZQ-1标",value:1},{text:"CYCZQ-2标",value:2},{text:"CYCZQ-3标",value:3},{text:"CYCZQ-4标",value:4},{text:"CYCZQ-5标1",value:5},{text:"CYCZQ-5标2",value:6},{text:"CYCZQ-6标",value:7}],option2:[{text:"全部工区",value:0}],disabledSection:""}},components:{vantHeader:I.default},created:function(){this.value1=Number(this.$route.query.ValueId),0==this.value1?this.Section:this.change1(this.value1),this.getUserWorkPointList()},mounted:function(){this.init(),this.getAllGPS()},methods:{init:function(){this.map=new BMap.Map("containerS");var t=new BMap.Point(116.404,39.915);this.map.centerAndZoom(t,15),this.map.addControl(new BMap.MapTypeControl({mapTypes:[BMAP_NORMAL_MAP,BMAP_HYBRID_MAP]})),this.map.enableScrollWheelZoom(!0)},activeClassButton:function(){this.carList.length<5?x()("暂无更多数据"):this.activeClassType=!this.activeClassType},searchShowHide:function(){this.isSearchShow=!this.isSearchShow},searchCancel:function(){this.searchShowHide()},onSearch:function(){},change1:function(t){this.Section=0!=t?this.option1[t].text:"",this.option2.splice(1),this.getUserWorkPointList(),this.getAllGPS(),this.value2=Number(0)},change2:function(t){this.Worksite=0!=t?this.option2[t].text.replace("#","%23"):"",this.getAllGPS()},getUserWorkPointList:function(){var t=this;M.get("/API/WebAPIDataAudit/GetWorkarea?Section="+this.Section).then(function(a){if(0!=a.data.result)if(1!=a.data.result);else{for(var e in a.data.data)null!=a.data.data[e].WORKAREA&&t.option2.push({text:a.data.data[e].WORKAREA,value:Number(e)});t.disabledSection=!1}else t.disabledSection=!0})},getAllGPS:function(){var t=this,a=this;M.get("/API/WebAPIDataAudit/getCarInfo?Section="+this.Section+"&worksite="+this.Worksite).then(function(i){if(200==i.status){if(0==i.data.result)return t.showList=!0,void t.init();if(1==i.data.result){t.showList=!1,a.carList=i.data.data;for(var s=[],n=[],o=0;o<a.carList.length;o++)null==a.carList[o].DIRECTION&&(a.carList[o].DIRECTION="0"),a.carList[o].LONGITUDE&&a.carList[o].LATITUDE&&(a.carList[o].DIRECTION=a.carList[o].DIRECTION.replace(/[^0-9]/gi,""),s.push(new BMap.Point(a.carList[o].LONGITUDE,a.carList[o].LATITUDE)),n.push({direction:a.carList[o].DIRECTION,STATUS:a.carList[o].STATUS,IMEIS:a.carList[o].IMEIS,CARNUMBER:a.carList[o].CARNUMBER,DRIVERNAME:a.carList[o].DRIVERNAME,DRIVERPHONE:a.carList[o].DRIVERPHONE,CARTYPE:a.carList[o].CARTYPE,CARPHOTOURL:a.carList[o].CARPHOTOURL}));(new BMap.Convertor).translate(s,1,5,function(t){if(t.status=0,t.points=s,console.log("convertor:",t,n),0===t.status)for(var i=0;i<t.points.length;i++)for(i=0;i<n.length;i++){var o=new BMap.Icon(e("xVa3"),new BMap.Size(40,19),{anchor:new BMap.Size(40,19),offset:new BMap.Size(40,19),imageSize:new BMap.Size(40,19)}),r=new BMap.Marker(t.points[i],{icon:o,rotation:n[i].direction,title:"awdawa"}),c="";1==n[i].STATUS?c="运行中":0==n[i].STATUS&&(c="离线状态");var l="<h4 style='margin:0 0 5px 0;padding:0.2em 0'>车辆信息</h4><ul style='margin:4px'><li style='margin-top:5px'>设备编号："+n[i].IMEIS+"</li><li style='margin-top:5px'>车牌号码："+n[i].CARNUMBER+"</li><li style='margin-top:5px'>驾驶司机："+n[i].DRIVERNAME+"</li><li style='margin-top:5px'>手机号码："+n[i].DRIVERPHONE+"</li><li style='margin-top:5px'>车辆类型："+n[i].CARTYPE+"</li><li style='margin-top:5px'>行驶状态："+c+"</li></ul><img style='margin:4px' id='imgDemo' src='"+a.ajax.http+n[i].CARPHOTOURL.slice(2)+"' width='162' height='96'/></div>";a.addClickHandler(l,r),a.map.addOverlay(r),a.map.setCenter(t.points[i])}})}}})},addClickHandler:function(t,a){var e=this;a.addEventListener("click",function(a){e.openInfo(t,a)})},openInfo:function(t,a){var e=a.target,i=new BMap.Point(e.getPosition().lng,e.getPosition().lat),s=new BMap.InfoWindow(t,{width:250,height:280,title:"",enableMessage:!0});this.map.openInfoWindow(s,i)},showCarDetails:function(t){console.log(t),t.LATITUDE&&t.LONGITUDE?(sessionStorage.setItem("curCarInfor",s()(t)),this.$router.push("/machinePositioning_carX")):x.a.fail("暂无车辆位置信息")}}},y={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"list-container"},[e("div",{staticClass:"l-dropdown"},[e("van-dropdown-menu",[e("van-dropdown-item",{attrs:{id:t.value1,options:t.option1},on:{change:function(a){return t.change1(t.value1)}},model:{value:t.value1,callback:function(a){t.value1=a},expression:"value1"}}),t._v(" "),e("van-dropdown-item",{attrs:{id:t.value2,disabled:t.disabledSection,options:t.option2},on:{change:function(a){return t.change2(t.value2)}},model:{value:t.value2,callback:function(a){t.value2=a},expression:"value2"}})],1)],1),t._v(" "),e("div",{attrs:{id:"containerS"}}),t._v(" "),e("ul",{directives:[{name:"show",rawName:"v-show",value:!t.activeClassType,expression:"!activeClassType"}],staticClass:"footer_k footer_car",class:{activeClass:t.activeClassType}},[e("div",{on:{click:function(a){return t.activeClassButton()}}},[e("van-icon",{staticStyle:{"margin-bottom":"10px","text-align":"center",display:"block"},attrs:{name:"arrow-up",color:"rgba(112, 153, 208, 1)",size:"24px"}})],1),t._v(" "),e("li",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticStyle:{width:"100%","text-align":"center"}},[t._v("暂无车辆信息")]),t._v(" "),t._l(t.carList.slice(0,4),function(a){return e("li",{directives:[{name:"show",rawName:"v-show",value:!t.showList,expression:"!showList"}],staticStyle:{width:"25%"},on:{click:function(e){return t.showCarDetails(a)}}},[e("img",{attrs:{src:t.ajax.http+a.CARPHOTOURL.slice(2),alt:""}}),e("span",{staticStyle:{display:"block"}},[t._v(t._s(a.CARNUMBER))])])})],2),t._v(" "),e("transition",{attrs:{name:"van-slide-up"}},[e("ul",{directives:[{name:"show",rawName:"v-show",value:t.activeClassType,expression:"activeClassType"}],staticClass:"footer_k footer_carS",class:{activeClass:t.activeClassType},staticStyle:{overflow:"auto"}},[e("div",{on:{click:function(a){return t.activeClassButton()}}},[e("van-icon",{staticStyle:{"margin-bottom":"10px","text-align":"center",display:"block"},attrs:{name:"arrow-down",color:"rgba(112, 153, 208, 1)",size:"24px"}})],1),t._v(" "),t._l(t.carList,function(a,i){return i>=4?e("li",{staticClass:"position",staticStyle:{width:"100%"},on:{click:function(e){return t.showCarDetails(a)}}},[e("img",{staticStyle:{width:"54px",height:"32px"},attrs:{src:t.ajax.http+a.CARPHOTOURL.slice(2),alt:""}}),t._v(" "),e("span",{staticStyle:{float:"left",margin:"0"}},[t._v(t._s(a.CARNUMBER))]),t._v(" "),1==a.STATUS?e("span",{staticClass:"status",staticStyle:{"margin-left":"14px"}},[t._v("运行中")]):t._e(),t._v(" "),2==a.STATUS?e("span",{staticClass:"status",staticStyle:{background:"#A52A2A","margin-left":"14px"}},[t._v("静止时间 00:00:00")]):t._e(),t._v(" "),0==a.STATUS?e("span",{staticClass:"status",staticStyle:{background:"#B9B9B9","margin-left":"14px"}},[t._v("离线状态")]):t._e(),t._v(" "),e("span",{staticStyle:{float:"right",margin:"0"}},[t._v(t._s(a.CARTYPE))])]):t._e()})],2)])],1)},staticRenderFns:[]};var O=e("VU/8")(E,y,!1,function(t){e("LuiR")},"data-v-4d39747c",null);a.default=O.exports},xVa3:function(t,a){t.exports="data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAAAmCAYAAAEkbSznAAAABGdBTUEAALGPC/xhBQAAC2NJREFUaAXdGgtQVNf1vLdvWXYXWL7yU0dFAlX5mNH6iVXT2qbqVOtMQmwTxyQNmv6skDglplock078IWOnTYRpSWqadFBbreInTYOpxj+VT0M0KKAionzkDwu77/Wcu/uW/cIDFqU9zHLvPefcc8+9737OOfcCKASO+NbvLZb+c+K3oDWMAZ0hHHwDwqD5zlW4+e8jsPDH7zFRwvq9JQcBJJj23Z8zhPyv5MgOOctSnuOkEgeMh4Kt6VPvvODCIjeLTCYXoicERx1prauAu9c+By12gn5hMV8HaqFPIv+2ICMCImI9CcOuihm8R6oTQSDx5/+8AQS1L7Q33raRp37nJ7Z89tpkjvWaMHv27NG0tLSMV6lUwRs3brwgc73+/pchRqMpDsAcj7g4Ebj4RVE1yz65Ey2zsJSEUYbL/KAi4NDOZ1rkDjpwuSnYD7e7OnxLR0e5m3pDRvG71yaPHXJtb1U8erRA8pYsOHnypL4/YbavvG3btrEmkylYFMXgTZs2naJKkiRxr+aW4Mzj4iUO4rAYz4EYJ4nm6cCpdHaCK/ArP0ZlLj2nZJlZNB/mOB4qTu+Dns5m0PiFgOCjBUGjB0PEZMS1gjYwAnz9Q+DcvnTo7WqzTXs7oUBTR2hvqjl8+cAWmJ+aA7HfWGVPd8mbe7uZMCLcqzgP4bGzHXjScoqr+Yt/eQOSvrfBgeCpoMJVIsPt4mNy1i7lgtna02F3BgvtDbdcquCY+/O+/qFQW/6ZC3EgRPC4aW5Z+NnP74SqCwfcEp2RoqnHhkpYkmbLy5nda5J4Nm1oEyOkvE7VWn/b4E9f8QZc+dtbch2cFxwsfCWvr2zNBa5JUmVynOhCGC7CNrGHK6i/+seOHQuQJLi4dOkS2gIhPz9fVV9fr8XtUsvzvDYjI8P1C1sF2hRMyy1dLkniQdzHVc6NmXq62MJpu18JPbhIervp184WEOVj5z0HZceyrbRWRsNlaxMTMGYS0KfgeBXQd+UFHxvNbYbnnslOTWITxfaN5e8789k3QR/snQ2SFueXn7zrooO7fd6FCRGCwM/l0/YWZxQffpvRxyUv8ZpyJNB552CN4L9rhX+Qs/2mZpN0CDcGLqW59ipjjE74Vr8VvEW8e/W0QlES27lqZG5j+wM5O6KpoLE/ODw3hbNYIBvttZi5P2BcVz/N8cztRUrMnGcVSeM4rkl17si7jU+9vGsRnonjG6qvgErtg0ecZ2OtX8m4ckVzLy5gtKVwxRJMmLEcAsInsXJnyz3AdiBh8fp+xRBR66sJ3fGjaZm2bYaQaTllK3hT2xxN160NbJNgVp6FpVsf9xucrzjiIs1bnlRATWir54GTGA5FWHFIpwMeLLwc8n0zunblqbroA6qOmpVYH3cza9PYhiT4XTML/jdwxH6XlZro7hgl9UYOTpw4MXmo0oWhVhxMPbNZJFPWtjvn5eX51tXVsVNErVZ3p6enN3mS5/CJiWn79u0RRqNRixa7Fm06rSAIvn5+fmXr1q1rdRaSln9bq25pCpEkIdQE5lC0+kIljguhFD8rlrlQCaSQyQHtUzDVVzbrAiXO5aCyieV51aqs1IQPbAjM2BRM21tShEIetydSniY82YC8oAYyiijfQ0cdpV2tzFfpbquHrtYGxNEx1wbmXqODmMcWrIaoKU864PoptKJtaZDpTMH1OSW4+Lo5laCR8VBT9g9oqb3GFFTh2Rk7fzVUXzrEVjmvUrPzVIWpISoenalbQDy8ygfpGtCHjGNnd33lZajDTbnxZp+3+bVFr3g8YWyNY8bmO6Xnlj3fcLNkX+nRnWhF62DeS7+35xtWXj7f7YVo0bue9cNt9ii3eRw5E3pNal4UzX8k5QjmrNrtltmbyC7cC5UAnSLEh3sVqOUK9Hm8CYZI5vsMSyRPjtJIAQVMhgt8d2v9cGV4rO+LHqI7oONOKfC9xk6lvIPmG9ByHkBifr6k4vVBUQOwDZ1Mrq87kA0JdzR7XDmUa3kKqI0UmIwdwxJtbPfR0ioeMWipuz4s2dP9JjeRmfROyIRkJujG2Y+GJdC5srt4geJ5yXEnU1I4s+WoQ8+d7foevHLnhj2VaXWaTUY85vpM+u62Bqi/cRHuX78IbfXVQNb7uKSnPIlgeLQLizCsMIMKTMG03JINkihtl2u1N9yEy/t/LRdZSvGgf+WuccDJhZDxidB4q1QuuqSBUXGQvPx1F7w7BNq5m3avSXxTpjEFqfDan0rGmI2w2re1HBWV0ZSixcvzXd362GzKgUSWcp8VzTHLWrRY2GhZs7LVssa6aG2jXcGJwhMRdd8/W4U2oSSpKH5iAYv8Xk14AeJu4qj91Ep4uAmGPjYVFJzoPxznQSW5Kx7I/ztoHISnRVHaj1PkxaVLF7/3sDT/vxlAGrCCgoJP0fF9UqXi4y9durQAN4NsjIKq0csQMMqMqwd/FBqjGBalVhzw6tZOw/Q09D11tMxwoV2ZY0g8S7vcQB/C4wBm7q3VdfL1wdrG07tAMqdI5PDKDbJUYGWmhJVmVod8ZtKEXEdTExUBHXo4LEVGLSqCZcJLLMU1q8X17LF9d4pTSIC8HQrgmfEn4o5rn0pY9g8Oh6jIaGgyeseyRQULQc2/vPulxEp3Ojl0AKPqm/ELbnHHSLiqS3+FxupiSwewI9QZOjbsjbsJM1eAPigSvvhYuWMTFjMTKOR97VSep6ZteDL5fXQGvDoMZ3FC/zETITAyjuGM7U3Qer8K2uuroBWPLDptyPWcuzob6YE2GUPKYASLl2BT1toku2i49bjILJSE5q9KMUAoxdSUfgyV5/Nx/xcgPO4JmDTraeY+DqnREaxUU3oSrn+uzLCJnLIQ4ha84DVt8Kh8NWtNchYJZKZgc0Xp32nwig5uQaU+xOgZxjDQEKaZRBdOoxEMOOuUwt3yU+wCTSn/QHyiBLswCHOc+Pi0nNJFuBctrrywH9pw+ssQhEsqetoiuTjqUv+wCeCjV74s75T908t9kBJIIC5rYJHpu05XdWMmz/Jyg94XRzdDSqGtoVopqzI+OgQReE4SJ1LYjK607IHuiEc70B2tUiA/yKsgSZYBRHNiAl2mOwNdtI920OiDFKtIp7H9vbTiih4YceVaB1CCRncXUma8eB3t4BwBH0hfxaGCgQRZ6Zl5Vb68xElF7sJaHQ9qFYp5dGxmk/uQmTuNdEGOr5rc8QwW1+3TpsU9kDtHr0zo+Zc93PvqnH1xVOa7Wu4r1iswmj2RUMyvhNHco9Lgo62k9zGEUhczJwXN6j7HhIJQnc11SuQ8Mp4WfAOoFCLQKfAm8DyXtuPFqXXMkMao0wo60ZKXZTi0cTn/V+xGzgE5Sgp0KJBLRxdxA0Hw+AQYjMnTnzyKVgbq9Yas1KRs4rNNufTcktloYZ8lB7++sgiM7Y0QOvFxfObmaCqQ39uGPmYHXnV2PLgDJmMXc+gldPRFuvtHodEJ30ajvBIe1JSjODPzlSVRtKTIQ54OyaGrU0rJ20le9ku48FGGhYZ4JLr0g64D6MBTo4Wg1gaADj0lnSEC0ygwRMY6hHKpMvnGXXjxQ28QlAy0S4N2COxXgSFIvTIzZaqDvWcbQJk3LafkF5h/C8NAnu0Y7Bz9USfpD7cAzFKHMU9BVOuTJ5Ip4+WUcFSV/rEBxHpUX6WxuIwmtEeJlxSzsFnaQCRVsgDm6Y9wFrmEtuRDMdYzNkwHtzv8odvM7h+tlQaf4Gw7j48yfrYrNbHIU22XAXRmLCwsFM6cOUPRWpTFmfCVZy/mTfhIjaXYAZYSDvP1mzdv/sJZxsMqHz9+fB4+hziNen6ID+ue27p1Kz3xisByL+ptIh0pT6mst10/DuLr1YrB6jrgAA5W4KPkx4DqcZyUYRER4fNnzJgxcneidp38LwuffoLmPGQbAAAAAElFTkSuQmCC"}});
//# sourceMappingURL=34.0f0781c34ab4693d8003.js.map